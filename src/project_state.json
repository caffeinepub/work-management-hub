{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Motoko-based service management system with task delegation, estimation approval workflow, partner assignment, status tracking, financial calculations (hourly rates by partner level), and client view masking (hiding rejection statuses)",
  "architectural_notes": [
    "Financial trigger on task completion: burns jamOnHold units from service, calculates partner payment based on jamEfektif × hourly rate (Junior: 35k IDR, Senior: 55k IDR, Expert: 75k IDR)",
    "Client view masking: PendingPartner and RejectedByPartner statuses displayed as 'Sedang Didelegasikan' to hide rejection details from clients",
    "Task status lifecycle: OnProgress → InQA → ClientReview → Revision → OnProgress (revision cycle), ends with Completed",
    "Internal data (internalData field) excluded from client-facing queries for security/privacy",
    "Partner payment system: calculates earnings based on actual work hours (jamEfektif) and partner skill level"
  ],
  "known_issues": [],
  "isFixRequest": false,
  "existing_features": [],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Implement updateTaskStatus function that accepts taskId and newStatus (TaskStatus) as parameters, updates the task's status field to the new status value for managing revision cycles (OnProgress → InQA → ClientReview → Revision → OnProgress)",
      "reqIds": [
        "REQ-5"
      ],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Implement completeTask function as the financial trigger that: (1) accepts taskId parameter, (2) retrieves task and layanan data, (3) burns units by subtracting task.estimasiJam from layanan.jamOnHold, (4) calculates partner payment using jamEfektif from task.internalData multiplied by hourly rate based on partner level (Junior: 35,000, Senior: 55,000, Expert: 75,000), (5) includes pseudo-code comment for adding pendapatanPartner to partner balance, (6) changes task status to Completed, and (7) returns success message with financial calculations",
      "reqIds": [
        "REQ-6"
      ],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Implement getClientTasks query function that: (1) accepts clientId (Principal) parameter, (2) filters tasks by clientId, (3) maps each task to TaskClientView type, (4) implements masking logic where PendingPartner and RejectedByPartner statuses display as 'Sedang Didelegasikan' (hiding rejections from client), (5) converts other statuses to user-friendly strings (OnProgress → 'Sedang Dikerjakan', InQA → 'Quality Assurance'), (6) excludes internalData field from the returned view, and (7) returns array of TaskClientView with clear comments marking the masking logic",
      "reqIds": [
        "REQ-7"
      ],
      "status": "pending"
    }
  ],
  "projectName": "Work Management Hub",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}